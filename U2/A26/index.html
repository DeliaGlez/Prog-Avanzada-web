<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Document</title>
        <style >
             canvas{
                background-color: steelblue;
             }
        </style>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>

        <canvas id="canvas" width="700" height="700"></canvas>
        
        <script type="text/javascript">
            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            var color = getRandomColor();   
            ctx.fillStyle = color;

            let x =350;
            let y =350;
            ctx.fillRect(x, y, 40, 40);
            var dir = "";
            
            document.addEventListener("keydown",function(e){
               

                switch(e.keyCode){
                    case 87:
                        dir = "up";
                    break;
                    case 83:
                        dir = "down";
                    break;
                    case 65:
                        dir = "left";
                    break;
                    case 68:
                        dir = "right";
                    break;

                }
                
                
            })

            function update(){
                switch(dir){
                    case "up":
                        y=y-10;
                    break;
                    case "down":
                        y=y+10;
                    break;
                    case "left":
                        x=x-10;
                    break;
                    case "right":
                        x=x+10;
                    break;

                }
                console.log(dir);
                
            }

           
            function pintar(){
                ctx.fillStyle ='steelblue';
                ctx.fillRect(0, 0, 700, 700);

                color = getRandomColor();
                ctx.fillStyle = color;
                ctx.fillRect(x, y, 40, 40);

                update();
                requestAnimationFrame(pintar);
            }
            
            requestAnimationFrame(pintar); 


            function getRandomColor() {
                var trans = '0.5'; // 50% transparency
                var color = 'rgba(';
                for (var i = 0; i < 3; i++) {
                    color += Math.floor(Math.random() * 255) + ',';
                }
                color += trans + ')'; // add the transparency
                return color;

               
            }

        </script>
        
    </body>
</html>